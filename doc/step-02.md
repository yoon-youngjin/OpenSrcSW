# 깃 개념 잡기

## 깃 저장소 생성

### 폴더와 깃 저장소
- 깃 저장소는 외형적으로 폴더와 유사함
- 깃 저장소에는 별도의 숨겨진 영역(=폴더)이 있는데, 여기에 **버전 관리 시스템(VSC, Version Control System)**에 필요한 파일 변경 이력을 기록
- 저장소는 프로젝트의 모든 리비전(개정)과 히스토리를 가진 DB와 같음
- 일반적으로 폴더와 깃 저장소의 차이점은 숨겨진 영역(=폴더)이 있는지 여부


### 초기화
> git init 경로명
> 
> 해당 폴더를 저장소로 만듦(숨겨진 폴더를 추가함)
> 
> git init . : 현재 폴더를 저장소로 만듦

## 워킹 디렉토리
- 깃은 저장 공간을 크게 ‘작업을 하는 공간(working)’과 ‘임시로 저장하는 공간(stage)’, ‘실제로 저장하여 기록하는 공간(repository)’으로 나뉨
- 논리적으로 공간을 분리하는 것은 깃의 동작과 이력을 좀 더 효율적으로 처리하기 위함
- 워킹 디렉토리는 ‘작업을 하는 공간’을 의미
- 말 그대로 로컬 저장소에 접근할 수 있으며, 실제로 파일을 생성하고 수정하는 공간

### 파일의 untracked 상태와 tracked 상태
- 깃은 워킹 디렉토리에 있는 파일들을 tracked(=추적됨)과 untracked(=추적되지 않음) 상태로 구분
- untracked: 깃의 관리를 받지 않는 상태
  - 실제 작업 중인 파일은 워킹 디렉토리에 존재
  - 워킹 디렉토리에 파일을 추가하거나 수정했다고 해서 깃이 자동으로 관리해주지 않음
  - 워킹 디렉토리에 새로 생성된 파일은 모두 untracked 상태
  - 이 파일을 관리하려면 깃에 추적하라고 통지해 줘야함
- tracked: 깃의 관리를 받는 상태
  - 워킹 디렉토리 안에 추적되지 않는 상태의 파일들은 별도로 명령어를 실행하여 추적 상태로 변경해 줘야함
    > git add 파일이름
    > 
    > 해당 파일이 **스테이지 영역**으로 넘어 감
<p align="center">
     <img src="https://user-images.githubusercontent.com/83503188/160822254-00e97db0-0d31-4b1d-844b-ff418240155e.png" width="600px" />
</p>

## 스테이지
- 저장소로 가기 위한 임시 영역
- 깃은 워킹 디렉토리에서 작업이 끝난 파일을 스테이지로 잠시 복사
- 스테이지가 임시 영역이라고 해서 파일의 콘텐츠 내용을 직접 가지고 있지는 않음
- 단지 커밋하려는 파일의 추적 상태 정보들만 기록
- 파일들의 스테이지 상태는 status 명령어로 확인 가능 -> **`git status`**
- 깃의 git ls-files 같은 명령어로도 확인 가능함 -> **`git ls-files -–status`**

### 파일의 **stage**상태와 **unstage**상태
- 스테이지 영역은 stage 상태와 unstage 상태로 구분
- 깃의 변화 이력을 기록하려면 파일들의 최종 상태가 stage 상태여야 함
- unstage 상태라면 파일에 변화가 있다는 것을 의미
- 스테이지 영역에 있는 파일과 워킹 디렉토리 안에 있는 파일 내용에 차이가 있을 때는 unstage 상태가 됨

<p align="center">
     <img src="https://user-images.githubusercontent.com/83503188/160822423-a30f6272-4763-4333-b254-4970b5c0af15.png" width="600px" />
</p>

### 파일의 modified 상태와 unmodified 상태
-	워킹 디렉토리에서 등록 명령(=**git add .**)을 실행하면 스테이지에 등록
-	이때 자동으로 tracked 상태가 됨
-	파일을 수정하지 않으면 계속 stage 상태에 머무름
-	파일이 수정되면 modified 상태가 되고, 스테이지에서 떨어져 나와 unstage 상태가 됨
-	unstage 상태의 파일은 워킹 디렉토리에 잠시 담아 둠
-	이때 다시 등록 명령을 실행하면 stage 상태로 변경

### 파일의 상태 확인
- 상태: 깃의 분리된 저장 영역인 워킹 디렉토리와 스테이지, 추적 여부
  > **`git status`**

## 파일 관리 목록에서 제외: .gitignore
- 프로젝트를 하다 보면 모든 파일을 추적하지 않아야 하는 경우도 있음


### .gitignore 파일 표기법
- 파일에서 #으로 시작하는 줄은 주석으로 처리

- `#` 없이 완전한 파일 이름을 적어 주면 그 파일은 깃의 관리 대상에서 제외
- 이때 경로가 있다면 경로명도 같이 입력
- DB 접속 파일을 제외함
  `dbinfo.php`
- 셸 글로빙: 애스터리스크(*) 기호를 사용하여 패턴을 정의할 수 있음

- 오브젝트 파일은 제외함
  `*.obj`

- 제외하지 않는 파일과 필요한 파일은 파일 이름 앞에 느낌표(!)를 사용
- 환경 설정 파일은 제외하면 안됨
  `!config.php`
- 현재 디렉토리 안에 있는 파일 무시
  `/readme.txt `

- doc 디렉토리 아래의 모든 .txt 파일 무시 
  `doc/**/*.txt`

## 깃 저장소 복제
- 외부에 있는 기존 프로젝트를 기반으로 저장소를 생성하고 싶다면 외부 저장소를 복제해서 생성 할 수 있음
- 다운로드를 통해 복제하는 것은 깃의 이력을 포함한 저장 영역까지는 내려받는 것은 아님
- 이와 달리 깃을 이용하여 저장소를 복제하면, 최종 코드 뿐만 아니라 중간에 커밋 같은 변화의 이력도 같이 내려 받을 수 있음
  > **`git clone 원격저장소URL (새폴더이름)`**
<p align="center">
     <img src="https://user-images.githubusercontent.com/83503188/160823079-c03a4705-f9a9-45b0-ac3c-9fc9ae669c78.png" width="600px" />
</p>
